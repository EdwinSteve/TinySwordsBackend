generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  PLAYER
}

model User {
  id        String   @id @default(uuid()) @db.VarChar(191)
  nickname  String   @unique @db.VarChar(191)
  fullName  String   @db.VarChar(191)
  email     String   @unique @db.VarChar(191)
  password  String   @db.VarChar(191)
  birthDate DateTime @db.DateTime(3)
  createdAt DateTime @default(now()) @db.DateTime(3)

  matchId String? @db.VarChar(191)
  match   Match?  @relation(fields: [matchId], references: [id])

  createdMatch Match? @relation("CreatorMatch")

  role Role? @default(PLAYER)

  // ðŸŸ¢ Nuevo: puntaje actual dentro de la partida
  score Int @default(0)
}

model Match {
  id         String   @id @default(uuid()) @db.VarChar(191)
  title      String   @db.VarChar(191)
  maxPlayers Int
  createdAt  DateTime @default(now()) @db.DateTime(3)

  // RelaciÃ³n: un usuario es el creador
  creatorId String @unique
  creator   User   @relation("CreatorMatch", fields: [creatorId], references: [id])

  // RelaciÃ³n: una partida tiene muchos jugadores
  players User[]
}
